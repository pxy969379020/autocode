<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="${package}.dao.${className}Mapper}">

    <!-- 增加 -->
    <select id="insert" resultType="${package}.entity.${className}" #if($pk.extra == 'auto_increment') useGeneratedKeys="true" keyProperty="$pk.attrNameSmall"#end >
        insert into ${tableName}(
#if($pk.extra != 'auto_increment')
  `$pk.columnName`
#end
         `$pk.columnName` $pk.attrNameSmall,
#foreach($column in $columns)
        `$coulmn.columnName` $column.attrNameSmall,
#end
        `table_name` tableName,
        `table_comment` tableComment,
        `create_time` createTime
        from information_schema.tables
        where table_schema = (select database())
    </select>

    <!-- 通过表名查询 -->
    <select id="get" resultType="com.shulipeng.domain.Table">
        select
        `table_name` tableName,
        `table_comment` tableComment,
        `create_time` createTime
        from information_schema.tables
        where table_schema = (select database())
        and table_name = #{tableName}
    </select>

    <!-- 查询一个表所有列 -->
    <select id="listColumns" resultType="com.shulipeng.domain.Column">
        select
        `column_name` columnName,
        `data_type` dataType,
        `column_comment` comment,
        `column_key` columnKey,
        `extra`
        from information_schema.columns
        where table_name = #{tableName}
        and table_schema = (select database())
        order by ordinal_position
    </select>

</mapper>